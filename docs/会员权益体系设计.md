# AI Universal Generator - ä¼šå‘˜æƒç›Šä½“ç³»è®¾è®¡æ–¹æ¡ˆ

## ä¸€ã€ä¼šå‘˜ç­‰çº§ä½“ç³»è®¾è®¡

### 1.1 ä¼šå‘˜ç­‰çº§åˆ’åˆ†

| ç­‰çº§ | æœˆè´¹ | å¹´è´¹(ä¼˜æƒ ) | å®šä½ |
|------|------|------------|------|
| **Free** | $0 | $0 | ä½“éªŒç”¨æˆ· |
| **Basic** | $9 | $90 (17% off) | ä¸ªäººç”¨æˆ· |
| **Pro** | $29 | $290 (17% off) | ä¸“ä¸šåˆ›ä½œè€… |
| **Enterprise** | $99 | $990 (17% off) | ä¼ä¸š/å›¢é˜Ÿ |

### 1.2 æ ¸å¿ƒæƒç›Šå¯¹æ¯”è¡¨

#### ğŸ¯ AI æ¨¡å‹è®¿é—®æƒé™

| åŠŸèƒ½ | Free | Basic | Pro | Enterprise |
|------|------|-------|-----|------------|
| **æ–‡æœ¬ç”Ÿæˆ** |  |  |  |  |
| GPT-3.5 | âœ… 10æ¬¡/å¤© | âœ… 100æ¬¡/æœˆ | âœ… æ— é™ | âœ… æ— é™ |
| GPT-4 | âŒ | âœ… 20æ¬¡/æœˆ | âœ… 200æ¬¡/æœˆ | âœ… æ— é™ |
| GPT-4o | âŒ | âŒ | âœ… 50æ¬¡/æœˆ | âœ… æ— é™ |
| Claude 3.5 | âŒ | âŒ | âœ… 100æ¬¡/æœˆ | âœ… æ— é™ |
| DeepSeek R1 | âŒ | âœ… 10æ¬¡/æœˆ | âœ… 100æ¬¡/æœˆ | âœ… æ— é™ |
| **å›¾åƒç”Ÿæˆ** |  |  |  |  |
| DALL-E 2 | âŒ | âœ… 10å¼ /æœˆ | âœ… 50å¼ /æœˆ | âœ… æ— é™ |
| DALL-E 3 | âŒ | âŒ | âœ… 20å¼ /æœˆ | âœ… æ— é™ |
| Midjourney | âŒ | âŒ | âœ… 30å¼ /æœˆ | âœ… æ— é™ |
| FLUX | âŒ | âœ… 5å¼ /æœˆ | âœ… 50å¼ /æœˆ | âœ… æ— é™ |
| **è§†é¢‘ç”Ÿæˆ** |  |  |  |  |
| åŸºç¡€è§†é¢‘ | âŒ | âŒ | âœ… 5ä¸ª/æœˆ | âœ… 50ä¸ª/æœˆ |
| é«˜æ¸…è§†é¢‘ | âŒ | âŒ | âŒ | âœ… 20ä¸ª/æœˆ |

#### ğŸ’ ç‹¬ç‰¹åŠŸèƒ½æƒç›Š

| åŠŸèƒ½ | Free | Basic | Pro | Enterprise |
|------|------|-------|-----|------------|
| **ç§¯åˆ†ç³»ç»Ÿ** |  |  |  |  |
| æ³¨å†Œèµ é€ | 10 | 100 | 500 | 2000 |
| æœˆåº¦èµ é€ | 0 | 100 | 500 | 2000 |
| ç§¯åˆ†æœ‰æ•ˆæœŸ | 7å¤© | 30å¤© | 90å¤© | æ°¸ä¹… |
| **ç”Ÿæˆé€Ÿåº¦** |  |  |  |  |
| å“åº”ä¼˜å…ˆçº§ | ä½ | æ ‡å‡† | é«˜ | æœ€é«˜ |
| å¹¶å‘è¯·æ±‚æ•° | 1 | 2 | 5 | 10 |
| é˜Ÿåˆ—ç­‰å¾… | å¯èƒ½ | å°‘é‡ | ä¼˜å…ˆ | æ— éœ€ç­‰å¾… |
| **é«˜çº§åŠŸèƒ½** |  |  |  |  |
| API è®¿é—® | âŒ | âŒ | âœ… é™é€Ÿ | âœ… æ— é™ |
| æ‰¹é‡ç”Ÿæˆ | âŒ | âŒ | âœ… 10ä¸ª | âœ… 100ä¸ª |
| è‡ªå®šä¹‰æ¨¡æ¿ | âŒ | 3ä¸ª | 20ä¸ª | æ— é™ |
| å†å²è®°å½• | 7å¤© | 30å¤© | æ°¸ä¹… | æ°¸ä¹… |
| å¯¼å‡ºåŠŸèƒ½ | âŒ | âœ… | âœ… | âœ… |
| **åä½œåŠŸèƒ½** |  |  |  |  |
| å›¢é˜Ÿå¸­ä½ | - | - | - | 5ä¸ª |
| å…±äº«å·¥ä½œåŒº | âŒ | âŒ | âŒ | âœ… |
| ç®¡ç†é¢æ¿ | âŒ | âŒ | âŒ | âœ… |
| ä½¿ç”¨ç»Ÿè®¡ | âŒ | åŸºç¡€ | è¯¦ç»† | å®Œæ•´åˆ†æ |
| **æ”¯æŒæœåŠ¡** |  |  |  |  |
| ç¤¾åŒºæ”¯æŒ | âœ… | âœ… | âœ… | âœ… |
| Emailæ”¯æŒ | âŒ | âœ… 48h | âœ… 24h | âœ… 2h |
| ä¼˜å…ˆæ”¯æŒ | âŒ | âŒ | âœ… | âœ… |
| ä¸“å±å®¢æœ | âŒ | âŒ | âŒ | âœ… |
| å®šåˆ¶åŸ¹è®­ | âŒ | âŒ | âŒ | âœ… |
| **å…¶ä»–æƒç›Š** |  |  |  |  |
| å»é™¤æ°´å° | âŒ | âœ… | âœ… | âœ… |
| å•†ç”¨æˆæƒ | âŒ | âŒ | âœ… | âœ… |
| ç™½æ ‡åŠŸèƒ½ | âŒ | âŒ | âŒ | âœ… |
| SLAä¿è¯ | âŒ | âŒ | 99% | 99.9% |

## äºŒã€æŠ€æœ¯å®ç°æ–¹æ¡ˆ

### 2.1 æ•°æ®åº“æ”¹é€ 

```sql
-- 1. æ¿€æ´»å·²æœ‰çš„ subscriptions è¡¨
-- (è¡¨ç»“æ„å·²å­˜åœ¨äº src/db/subscriptions-schema.ts)

-- 2. åœ¨ users è¡¨æ·»åŠ è®¢é˜…ç›¸å…³å­—æ®µ
ALTER TABLE users ADD COLUMN subscription_id INTEGER REFERENCES subscriptions(id);
ALTER TABLE users ADD COLUMN subscription_tier VARCHAR(20) DEFAULT 'free';
ALTER TABLE users ADD COLUMN subscription_expires_at TIMESTAMP;

-- 3. åˆ›å»ºåŠŸèƒ½æƒé™æ˜ å°„è¡¨
CREATE TABLE feature_permissions (
  id SERIAL PRIMARY KEY,
  tier VARCHAR(20) NOT NULL, -- free, basic, pro, enterprise
  feature_key VARCHAR(100) NOT NULL, -- åŠŸèƒ½æ ‡è¯†
  allowed BOOLEAN DEFAULT true,
  daily_limit INTEGER, -- æ¯æ—¥é™åˆ¶
  monthly_limit INTEGER, -- æ¯æœˆé™åˆ¶
  config JSONB, -- å…¶ä»–é…ç½®
  UNIQUE(tier, feature_key)
);
```

### 2.2 æƒé™æ£€æŸ¥ä¸­é—´ä»¶

```typescript
// src/middleware/subscription.ts
export async function checkSubscriptionAccess(
  userUuid: string,
  feature: string,
  model?: string
) {
  // 1. è·å–ç”¨æˆ·è®¢é˜…ä¿¡æ¯
  const subscription = await getUserSubscription(userUuid);
  
  // 2. æ£€æŸ¥è®¢é˜…æ˜¯å¦æœ‰æ•ˆ
  if (!subscription || subscription.status !== 'active') {
    return { allowed: false, reason: 'No active subscription' };
  }
  
  // 3. æ£€æŸ¥åŠŸèƒ½æƒé™
  const permission = await getFeaturePermission(subscription.tier, feature);
  
  // 4. æ£€æŸ¥ä½¿ç”¨é™åˆ¶
  if (permission.monthly_limit) {
    const usage = await getMonthlyUsage(userUuid, feature);
    if (usage >= permission.monthly_limit) {
      return { 
        allowed: false, 
        reason: `Monthly limit reached (${usage}/${permission.monthly_limit})` 
      };
    }
  }
  
  // 5. æ£€æŸ¥æ¨¡å‹è®¿é—®æƒé™
  if (model && !permission.allowed_models?.includes(model)) {
    return { 
      allowed: false, 
      reason: `Model ${model} not available in your plan` 
    };
  }
  
  return { allowed: true };
}
```

### 2.3 API è·¯ç”±æ”¹é€ ç¤ºä¾‹

```typescript
// src/app/api/demo/gen-text/route.ts
export async function POST(req: Request) {
  const session = await auth();
  
  // 1. è®¤è¯æ£€æŸ¥
  if (!session?.user?.email) {
    return respErr("Please login first");
  }
  
  // 2. è·å–ç”¨æˆ·ä¿¡æ¯
  const user = await getUserWithSubscription(session.user.email);
  
  // 3. è®¢é˜…æƒé™æ£€æŸ¥
  const accessCheck = await checkSubscriptionAccess(
    user.uuid,
    'text_generation',
    model
  );
  
  if (!accessCheck.allowed) {
    // æ ¹æ®ç”¨æˆ·ç­‰çº§è¿”å›ä¸åŒæç¤º
    if (user.subscription_tier === 'free') {
      return respErr(
        "This feature requires a paid subscription. Upgrade to Basic plan for just $9/month!",
        { upgradeUrl: '/pricing' }
      );
    }
    return respErr(accessCheck.reason);
  }
  
  // 4. æ‰§è¡Œç”Ÿæˆ...
  // 5. è®°å½•ä½¿ç”¨æƒ…å†µ
  await recordUsage(user.uuid, 'text_generation', model);
}
```

## ä¸‰ã€å·®å¼‚åŒ–åŠŸèƒ½å®ç°

### 3.1 é€Ÿåº¦ä¼˜å…ˆçº§é˜Ÿåˆ—

```typescript
// æ ¹æ®ç”¨æˆ·ç­‰çº§åˆ†é…ä¸åŒä¼˜å…ˆçº§
const PRIORITY_LEVELS = {
  free: 1,
  basic: 5,
  pro: 10,
  enterprise: 20
};

// ä½¿ç”¨ Redis å®ç°ä¼˜å…ˆçº§é˜Ÿåˆ—
async function addToQueue(task: GenerationTask) {
  const priority = PRIORITY_LEVELS[task.userTier];
  await redis.zadd('generation_queue', priority, JSON.stringify(task));
}
```

### 3.2 å¹¶å‘é™åˆ¶

```typescript
// ä¸åŒç­‰çº§çš„å¹¶å‘é™åˆ¶
const CONCURRENT_LIMITS = {
  free: 1,
  basic: 2,
  pro: 5,
  enterprise: 10
};

// ä½¿ç”¨ Redis å®ç°å¹¶å‘æ§åˆ¶
async function checkConcurrency(userUuid: string, tier: string) {
  const current = await redis.get(`concurrent:${userUuid}`);
  const limit = CONCURRENT_LIMITS[tier];
  
  if (current >= limit) {
    throw new Error(`Concurrent limit reached (${current}/${limit})`);
  }
  
  await redis.incr(`concurrent:${userUuid}`);
  // è®¾ç½®è¿‡æœŸæ—¶é—´é˜²æ­¢æ­»é”
  await redis.expire(`concurrent:${userUuid}`, 60);
}
```

### 3.3 åŠŸèƒ½å¼€å…³

```typescript
// åŸºäºè®¢é˜…ç­‰çº§çš„åŠŸèƒ½å¼€å…³
const FEATURE_FLAGS = {
  free: {
    watermark: true,
    export: false,
    api_access: false,
    batch_generation: false,
    custom_templates: false,
    advanced_models: false,
  },
  basic: {
    watermark: false,
    export: true,
    api_access: false,
    batch_generation: false,
    custom_templates: true,
    advanced_models: ['gpt-4', 'dall-e-2'],
  },
  pro: {
    watermark: false,
    export: true,
    api_access: true,
    batch_generation: true,
    custom_templates: true,
    advanced_models: ['gpt-4', 'gpt-4o', 'dall-e-3', 'claude-3.5'],
  },
  enterprise: {
    watermark: false,
    export: true,
    api_access: true,
    batch_generation: true,
    custom_templates: true,
    advanced_models: 'all',
    white_label: true,
    custom_domain: true,
  }
};
```

## å››ã€UI/UX å·®å¼‚åŒ–

### 4.1 ä¼šå‘˜æ ‡è¯†

```tsx
// ç”¨æˆ·ç•Œé¢æ˜¾ç¤ºä¼šå‘˜ç­‰çº§
<Badge variant={getUserBadgeVariant(user.subscription_tier)}>
  {user.subscription_tier === 'enterprise' && <Crown className="w-3 h-3 mr-1" />}
  {user.subscription_tier === 'pro' && <Star className="w-3 h-3 mr-1" />}
  {user.subscription_tier === 'basic' && <Zap className="w-3 h-3 mr-1" />}
  {user.subscription_tier.toUpperCase()}
</Badge>
```

### 4.2 åŠŸèƒ½é”å®šæç¤º

```tsx
// å¯¹æœªè§£é”åŠŸèƒ½æ˜¾ç¤ºå‡çº§æç¤º
{!canUseFeature('advanced_models') && (
  <div className="relative">
    <div className="absolute inset-0 bg-black/60 flex items-center justify-center rounded-lg">
      <div className="text-center text-white p-4">
        <Lock className="w-8 h-8 mx-auto mb-2" />
        <p className="font-semibold">Pro Feature</p>
        <p className="text-sm">Upgrade to Pro to unlock</p>
        <Button size="sm" className="mt-2">
          Upgrade Now
        </Button>
      </div>
    </div>
    {/* æ˜¾ç¤ºæ¨¡ç³Šçš„åŠŸèƒ½é¢„è§ˆ */}
    <div className="filter blur-sm pointer-events-none">
      {/* åŠŸèƒ½å†…å®¹ */}
    </div>
  </div>
)}
```

### 4.3 ä½¿ç”¨é‡ä»ªè¡¨æ¿

```tsx
// æ˜¾ç¤ºå½“å‰ä½¿ç”¨é‡å’Œé™åˆ¶
<Card>
  <CardHeader>
    <CardTitle>Usage This Month</CardTitle>
  </CardHeader>
  <CardContent>
    <div className="space-y-4">
      {/* æ–‡æœ¬ç”Ÿæˆä½¿ç”¨é‡ */}
      <div>
        <div className="flex justify-between text-sm mb-1">
          <span>Text Generation</span>
          <span>{usage.text}/{limits.text || 'âˆ'}</span>
        </div>
        <Progress value={(usage.text / limits.text) * 100} />
      </div>
      
      {/* å›¾åƒç”Ÿæˆä½¿ç”¨é‡ */}
      <div>
        <div className="flex justify-between text-sm mb-1">
          <span>Image Generation</span>
          <span>{usage.image}/{limits.image || 'âˆ'}</span>
        </div>
        <Progress value={(usage.image / limits.image) * 100} />
      </div>
      
      {/* è§†é¢‘ç”Ÿæˆä½¿ç”¨é‡ */}
      {user.tier !== 'free' && user.tier !== 'basic' && (
        <div>
          <div className="flex justify-between text-sm mb-1">
            <span>Video Generation</span>
            <span>{usage.video}/{limits.video || 'âˆ'}</span>
          </div>
          <Progress value={(usage.video / limits.video) * 100} />
        </div>
      )}
    </div>
  </CardContent>
</Card>
```

## äº”ã€å®æ–½è®¡åˆ’

### ç¬¬ä¸€é˜¶æ®µï¼šåŸºç¡€æ¶æ„ï¼ˆ1å‘¨ï¼‰
1. âœ… æ¿€æ´» subscriptions è¡¨
2. âœ… å®ç°è®¢é˜…æœåŠ¡å±‚
3. âœ… æ·»åŠ æƒé™æ£€æŸ¥ä¸­é—´ä»¶
4. âœ… æ›´æ–°ç”¨æˆ·æ¨¡å‹

### ç¬¬äºŒé˜¶æ®µï¼šåŠŸèƒ½å·®å¼‚åŒ–ï¼ˆ2å‘¨ï¼‰
1. âœ… å®ç°æ¨¡å‹è®¿é—®é™åˆ¶
2. âœ… æ·»åŠ ä½¿ç”¨é‡è¿½è¸ª
3. âœ… å®ç°ä¼˜å…ˆçº§é˜Ÿåˆ—
4. âœ… æ·»åŠ å¹¶å‘æ§åˆ¶

### ç¬¬ä¸‰é˜¶æ®µï¼šUI/UX ä¼˜åŒ–ï¼ˆ1å‘¨ï¼‰
1. âœ… æ›´æ–°å®šä»·é¡µé¢
2. âœ… æ·»åŠ ä¼šå‘˜æ ‡è¯†
3. âœ… å®ç°åŠŸèƒ½é”å®šæç¤º
4. âœ… åˆ›å»ºä½¿ç”¨é‡ä»ªè¡¨æ¿

### ç¬¬å››é˜¶æ®µï¼šé«˜çº§åŠŸèƒ½ï¼ˆ2å‘¨ï¼‰
1. âœ… API è®¿é—®æ§åˆ¶
2. âœ… æ‰¹é‡ç”ŸæˆåŠŸèƒ½
3. âœ… è‡ªå®šä¹‰æ¨¡æ¿ç³»ç»Ÿ
4. âœ… å›¢é˜Ÿåä½œåŠŸèƒ½

## å…­ã€ç›‘æ§ä¸ä¼˜åŒ–

### 6.1 å…³é”®æŒ‡æ ‡
- è½¬åŒ–ç‡ï¼šå…è´¹â†’ä»˜è´¹
- å‡çº§ç‡ï¼šBasicâ†’Proâ†’Enterprise
- ç•™å­˜ç‡ï¼šå„ç­‰çº§ç”¨æˆ·ç•™å­˜
- ä½¿ç”¨ç‡ï¼šåŠŸèƒ½ä½¿ç”¨é¢‘ç‡
- æ»¡æ„åº¦ï¼šNPS è¯„åˆ†

### 6.2 A/B æµ‹è¯•
- ä»·æ ¼æµ‹è¯•
- åŠŸèƒ½ç»„åˆæµ‹è¯•
- é™åˆ¶é˜ˆå€¼æµ‹è¯•
- UI æç¤ºæ–‡æ¡ˆæµ‹è¯•

## ä¸ƒã€ç«å“å¯¹æ¯”ä¼˜åŠ¿

| åŠŸèƒ½ | æˆ‘ä»¬ | OpenAI Plus | Claude Pro | Midjourney |
|------|------|-------------|------------|------------|
| æœˆè´¹ | $9-99 | $20 | $20 | $10-120 |
| å¤šæ¨¡å‹æ”¯æŒ | âœ… å…¨éƒ¨ | âŒ ä»…OpenAI | âŒ ä»…Claude | âŒ ä»…å›¾åƒ |
| API è®¿é—® | âœ… Proèµ· | âŒ | âŒ | âŒ |
| å›¢é˜Ÿåä½œ | âœ… Enterprise | âŒ | âŒ | âŒ |
| ç™½æ ‡å®šåˆ¶ | âœ… Enterprise | âŒ | âŒ | âŒ |
| ä¸­æ–‡ä¼˜åŒ– | âœ… | éƒ¨åˆ† | éƒ¨åˆ† | âŒ |

## å…«ã€è¥é”€ç­–ç•¥

### 8.1 å…è´¹è¯•ç”¨
- æ³¨å†Œé€ 10 ç§¯åˆ†
- 14 å¤© Pro è¯•ç”¨
- é™æ—¶å‡çº§ä¼˜æƒ 

### 8.2 æ¨èå¥–åŠ±
- æ¨èæˆåŠŸé€ç§¯åˆ†
- æ¨èä»˜è´¹ç”¨æˆ·å¾—ä½£é‡‘
- å›¢é˜ŸæŠ˜æ‰£

### 8.3 å­£èŠ‚æ€§ä¿ƒé”€
- é»‘äº”ä¼˜æƒ 
- æ–°å¹´ç‰¹æƒ 
- å­¦ç”ŸæŠ˜æ‰£

---

**å®æ–½ä¼˜å…ˆçº§ï¼šé«˜**  
**é¢„æœŸROIï¼š3-6ä¸ªæœˆå›æ”¶å¼€å‘æˆæœ¬**  
**é£é™©ï¼šéœ€è¦å¯†åˆ‡ç›‘æ§æœåŠ¡å™¨æˆæœ¬**

*æ–‡æ¡£ç‰ˆæœ¬ï¼š1.0*  
*æ›´æ–°æ—¥æœŸï¼š2025-08-15*