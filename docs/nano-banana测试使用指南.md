# Nano Banana API æµ‹è¯•ä½¿ç”¨æŒ‡å—

## ğŸ“– å¿«é€Ÿå¼€å§‹

è¿™ä¸ªæŒ‡å—å°†å¸®åŠ©æ‚¨å¿«é€Ÿä¸Šæ‰‹ nano-banana API çš„æµ‹è¯•å¥—ä»¶ã€‚

### ğŸš€ ä¸€é”®æ¼”ç¤ºæµ‹è¯•

å¦‚æœæ‚¨æƒ³å¿«é€ŸéªŒè¯æµ‹è¯•æ¡†æ¶æ˜¯å¦æ­£å¸¸å·¥ä½œï¼š

```bash
npm run test:nano-banana-demo
```

è¿™ä¸ªå‘½ä»¤è¿è¡Œä¸€ä¸ªç‹¬ç«‹çš„æ¼”ç¤ºæµ‹è¯•ï¼Œä¸ä¾èµ–ä»»ä½•å¤–éƒ¨æœåŠ¡ï¼Œå¯ä»¥éªŒè¯ï¼š
- æµ‹è¯•æ¡†æ¶åŸºæœ¬åŠŸèƒ½
- API å“åº”æ•°æ®ç»“æ„
- ç§¯åˆ†è®¡ç®—é€»è¾‘
- é”™è¯¯å¤„ç†æœºåˆ¶
- å¼‚æ­¥æ“ä½œå¤„ç†

## ğŸ§ª å®Œæ•´æµ‹è¯•å¥—ä»¶

### 1. API åŠŸèƒ½æµ‹è¯•

```bash
npm run test:nano-banana
```

æµ‹è¯•å†…å®¹ï¼š
- âœ… ç¯å¢ƒé…ç½®æ£€æŸ¥
- âœ… è®¤è¯ä¸æˆæƒæœºåˆ¶
- âœ… å›¾åƒç”ŸæˆåŠŸèƒ½
- âœ… å›¾åƒç¼–è¾‘åŠŸèƒ½
- âœ… å‚æ•°éªŒè¯
- âœ… é”™è¯¯å¤„ç†
- âœ… å¹¶å‘è¯·æ±‚å¤„ç†

### 2. ç§¯åˆ†ç³»ç»Ÿæµ‹è¯•

```bash
npm run test:nano-banana-credits
```

æµ‹è¯•å†…å®¹ï¼š
- âœ… ç§¯åˆ†å¢åŠ å’Œå‡å°‘
- âœ… FIFO æ¶ˆè´¹ç­–ç•¥
- âœ… ç§¯åˆ†ä¸è¶³å¤„ç†
- âœ… å¹¶å‘ç§¯åˆ†æ“ä½œ
- âœ… äº¤æ˜“è®°å½•å‡†ç¡®æ€§

### 3. è¿è¡Œæ‰€æœ‰æµ‹è¯•

```bash
npm run test:all-nano-banana
```

### 4. è‡ªåŠ¨åŒ–æµ‹è¯•è„šæœ¬

```bash
./test/run-nano-banana-tests.sh
```

è¿™ä¸ªè„šæœ¬ä¼šï¼š
- ğŸ”§ æ£€æŸ¥ç¯å¢ƒé…ç½®
- ğŸš€ å¯åŠ¨å¼€å‘æœåŠ¡å™¨
- ğŸ§ª è¿è¡Œå®Œæ•´æµ‹è¯•å¥—ä»¶
- ğŸ“Š ç”Ÿæˆè¯¦ç»†æŠ¥å‘Š
- ğŸ§¹ è‡ªåŠ¨æ¸…ç†èµ„æº

## ğŸ“‹ ç¯å¢ƒé…ç½®

### å¿…éœ€çš„ç¯å¢ƒå˜é‡

åœ¨ `.env.local` æ–‡ä»¶ä¸­é…ç½®ï¼š

```bash
# Nano Banana API é…ç½®
NANO_BANANA_API_KEY="your_api_key_here"
NANO_BANANA_API_URL="https://api.kie.ai/nano-banana"

# åŸºç¡€é…ç½®
NEXT_PUBLIC_WEB_URL="http://localhost:3000"
AUTH_SECRET="your_auth_secret"
AUTH_URL="http://localhost:3000/api/auth"

# æ•°æ®åº“é…ç½®ï¼ˆç§¯åˆ†æµ‹è¯•éœ€è¦ï¼‰
DATABASE_URL="your_database_url"
```

### è·å– API å¯†é’¥

1. è®¿é—® [Nano Banana API å®˜ç½‘](https://kie.ai/nano-banana)
2. æ³¨å†Œè´¦æˆ·å¹¶è·å– API å¯†é’¥
3. å°†å¯†é’¥é…ç½®åˆ°ç¯å¢ƒå˜é‡ä¸­

## ğŸ“Š æµ‹è¯•ç»“æœè§£è¯»

### æˆåŠŸç¤ºä¾‹

```
============================================================
æµ‹è¯•ç»“æœæ‘˜è¦
============================================================
æ€»æµ‹è¯•ç”¨ä¾‹: 22
é€šè¿‡: 22
å¤±è´¥: 0
é€šè¿‡ç‡: 100.0%
æ‰§è¡Œæ—¶é—´: 202ms

ğŸ‰ æ‰€æœ‰æµ‹è¯•é€šè¿‡ï¼
```

### éƒ¨åˆ†è·³è¿‡ç¤ºä¾‹

```
============================================================
æµ‹è¯•ç»“æœæ‘˜è¦
============================================================
æ€»æµ‹è¯•ç”¨ä¾‹: 20
é€šè¿‡: 9
å¤±è´¥: 0
è·³è¿‡: 11
é€šè¿‡ç‡: 45%

âš ï¸ éƒ¨åˆ†æµ‹è¯•è¢«è·³è¿‡ï¼Œé€šå¸¸å› ä¸ºç¼ºå°‘è®¤è¯æˆ–APIé…ç½®
```

### æµ‹è¯•çŠ¶æ€å«ä¹‰

- âœ… **é€šè¿‡**: æµ‹è¯•æˆåŠŸæ‰§è¡Œä¸”ç»“æœç¬¦åˆé¢„æœŸ
- âŒ **å¤±è´¥**: æµ‹è¯•æ‰§è¡Œä½†ç»“æœä¸ç¬¦åˆé¢„æœŸ
- âš ï¸ **è·³è¿‡**: ç”±äºç¯å¢ƒé™åˆ¶æ— æ³•æ‰§è¡Œï¼ˆå¦‚ç¼ºå°‘è®¤è¯ï¼‰

## ğŸ”§ å¸¸è§é—®é¢˜è§£å†³

### é—®é¢˜ 1: è®¤è¯ç›¸å…³æµ‹è¯•è¢«è·³è¿‡

**åŸå› **: æ²¡æœ‰æœ‰æ•ˆçš„ç”¨æˆ·ä¼šè¯

**è§£å†³æ–¹æ¡ˆ**:
```bash
# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
npm run dev

# åœ¨æµè§ˆå™¨ä¸­è®¿é—® http://localhost:3000 å¹¶ç™»å½•
# ç„¶åè¿è¡Œæµ‹è¯•
```

### é—®é¢˜ 2: ç§¯åˆ†æµ‹è¯•å¤±è´¥

**åŸå› **: æ•°æ®åº“è¿æ¥é—®é¢˜æˆ–ç§¯åˆ†ä¸è¶³

**è§£å†³æ–¹æ¡ˆ**:
```bash
# æ£€æŸ¥æ•°æ®åº“è¿æ¥
npm run db:studio

# ç¡®ä¿æµ‹è¯•ç”¨æˆ·æœ‰è¶³å¤Ÿç§¯åˆ†
# æˆ–åœ¨æµ‹è¯•ä¸­æ·»åŠ ç§¯åˆ†å……å€¼é€»è¾‘
```

### é—®é¢˜ 3: API è°ƒç”¨è¶…æ—¶

**åŸå› **: ç½‘ç»œé—®é¢˜æˆ– API æœåŠ¡ä¸å¯ç”¨

**è§£å†³æ–¹æ¡ˆ**:
```bash
# æ£€æŸ¥ç½‘ç»œè¿æ¥
curl -I https://api.kie.ai/nano-banana

# æˆ–è€…è°ƒæ•´æµ‹è¯•è¶…æ—¶æ—¶é—´
```

## ğŸ“ æµ‹è¯•æ–‡ä»¶ç»“æ„

```
test/
â”œâ”€â”€ nano-banana-api.test.js           # ä¸»APIæµ‹è¯•å¥—ä»¶
â”œâ”€â”€ integration/
â”‚   â””â”€â”€ nano-banana-credits.test.js   # ç§¯åˆ†ç³»ç»Ÿä¸“é¡¹æµ‹è¯•
â”œâ”€â”€ demo-test.js                      # æ¼”ç¤ºæµ‹è¯•ï¼ˆæ— ä¾èµ–ï¼‰
â””â”€â”€ run-nano-banana-tests.sh          # è‡ªåŠ¨åŒ–æµ‹è¯•è„šæœ¬
```

## ğŸš¦ CI/CD é›†æˆ

### GitHub Actions ç¤ºä¾‹

```yaml
name: Nano Banana Tests
on: [push, pull_request]

jobs:
  test:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - uses: actions/setup-node@v3
        with:
          node-version: '18'
      - run: npm ci
      - run: npm run test:nano-banana-demo  # åŸºç¡€æµ‹è¯•
      - run: npm run test:nano-banana       # å®Œæ•´æµ‹è¯•ï¼ˆéœ€è¦å¯†é’¥ï¼‰
        env:
          NANO_BANANA_API_KEY: ${{ secrets.NANO_BANANA_API_KEY }}
```

## ğŸ“ˆ æ€§èƒ½åŸºå‡†

### å“åº”æ—¶é—´æœŸæœ›

| æ“ä½œç±»å‹ | æœŸæœ›æ—¶é—´ | è¶…æ—¶è®¾ç½® |
|----------|----------|----------|
| æ¼”ç¤ºæµ‹è¯• | < 300ms | 5ç§’ |
| APIé…ç½®æŸ¥è¯¢ | < 500ms | 5ç§’ |
| å•å›¾ç”Ÿæˆ | < 5ç§’ | 30ç§’ |
| å›¾åƒç¼–è¾‘ | < 8ç§’ | 30ç§’ |
| ç§¯åˆ†æ“ä½œ | < 100ms | 3ç§’ |

### å¹¶å‘æ€§èƒ½

- æ”¯æŒ 5-10 ä¸ªå¹¶å‘è¯·æ±‚
- æˆåŠŸç‡åº” > 95%
- å¹³å‡å“åº”æ—¶é—´ < 8ç§’

## ğŸ¯ æœ€ä½³å®è·µ

### 1. æµ‹è¯•å‰å‡†å¤‡

```bash
# ç¡®ä¿ä¾èµ–å·²å®‰è£…
npm install

# ç¡®ä¿æœåŠ¡å™¨è¿è¡Œæ­£å¸¸
npm run dev

# è¿è¡Œå¿«é€ŸéªŒè¯
npm run test:nano-banana-demo
```

### 2. æµ‹è¯•æ‰§è¡Œé¡ºåº

```bash
# 1. å…ˆè¿è¡Œæ¼”ç¤ºæµ‹è¯•éªŒè¯æ¡†æ¶
npm run test:nano-banana-demo

# 2. å†è¿è¡ŒAPIåŠŸèƒ½æµ‹è¯•
npm run test:nano-banana

# 3. æœ€åè¿è¡Œç§¯åˆ†ç³»ç»Ÿæµ‹è¯•
npm run test:nano-banana-credits
```

### 3. è°ƒè¯•æµ‹è¯•é—®é¢˜

```bash
# å¯ç”¨è¯¦ç»†æ—¥å¿—
DEBUG=1 npm run test:nano-banana

# æŸ¥çœ‹æµ‹è¯•ç»“æœæ–‡ä»¶
ls -la test-results/

# æ£€æŸ¥æœåŠ¡å™¨æ—¥å¿—
tail -f .next/trace
```

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [Nano Banana API æµ‹è¯•æŠ¥å‘Š](./nano-bananaæµ‹è¯•æŠ¥å‘Š.md)
- [ç§¯åˆ†ç³»ç»Ÿè®¾è®¡æ–‡æ¡£](./ä¼šå‘˜æƒç›Šä½“ç³»è®¾è®¡.md)
- [é¡¹ç›®ä»£ç è§„èŒƒ](./é¡¹ç›®ä»£ç è§„èŒƒ.md)
- [Nano Banana API å®˜æ–¹æ–‡æ¡£](https://kie.ai/nano-banana)

## ğŸ†˜ è·å–å¸®åŠ©

å¦‚æœæµ‹è¯•è¿‡ç¨‹ä¸­é‡åˆ°é—®é¢˜ï¼š

1. **æŸ¥çœ‹è¯¦ç»†æ—¥å¿—**: æµ‹è¯•å¤±è´¥æ—¶ä¼šç”Ÿæˆè¯¦ç»†çš„é”™è¯¯æ—¥å¿—
2. **æ£€æŸ¥ç¯å¢ƒé…ç½®**: ç¡®ä¿æ‰€æœ‰å¿…è¦çš„ç¯å¢ƒå˜é‡å·²é…ç½®
3. **éªŒè¯APIå¯†é’¥**: ç¡®ä¿ nano-banana API å¯†é’¥æœ‰æ•ˆä¸”æœ‰è¶³å¤Ÿé¢åº¦
4. **æŸ¥çœ‹æµ‹è¯•æŠ¥å‘Š**: è¯¦ç»†çš„æµ‹è¯•æŠ¥å‘ŠåŒ…å«é—®é¢˜æ’æŸ¥æŒ‡å¯¼

---

**æœ€åæ›´æ–°**: 2025å¹´8æœˆ28æ—¥  
**æ–‡æ¡£ç‰ˆæœ¬**: v1.0.0  
**ä¸‹æ¬¡æ›´æ–°**: æ ¹æ®APIæ›´æ–°å’Œç”¨æˆ·åé¦ˆè¿›è¡Œè¿­ä»£